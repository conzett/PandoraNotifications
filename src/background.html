<script>
chrome.extension.onRequest.addListener(
  function(request, sender, sendResponse) {
    console.log(sender.tab ?
                "received request from tab:" + sender.tab.url :
                "received request from the extension");

    if (request.greeting == "song-change"){
		/*var url = 'notification.html?test=' + escape('I have Been passed');
        var notification = webkitNotifications.createHTMLNotification(url);*/
		var notification = webkitNotifications.createNotification(
			request.art,
			request.song,
			"By " + request.artist + " on " +  request.album
		)
        notification.show();
        var time = (localStorage["displayTime"] * 1000);
        setTimeout(function(){notification.cancel();}, time);

        sendResponse({farewell: "Notification Successful"});
    }
    else{ sendResponse({}); }
});

</script>